var CountdownHelper=function(){function e(){this.counter=60,this.enabled=!1,this.utterances=[60]}return e.prototype.username=function(){return document.getElementById("four-player-username").innerText},e.prototype.avatar=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n instanceof HTMLElement&&n.classList.contains("player-avatar"))return n}},e.prototype.current=function(e){return parseFloat(e.oldValue.trim().split(":")[1])},e.prototype.reset=function(e){if("childList"===e.type&&e.target instanceof HTMLDivElement&&0===e.target.classList.length&&1===e.addedNodes.length){var t=e.addedNodes[0];if(t instanceof HTMLElement&&t.classList.contains("modal-container"))t.querySelector(".game-over-container")&&(console.log("countdown helper counter reset"),this.utterances=[60],this.counter=60)}},e.prototype.utter=function(e){if(this.enabled&&"characterData"===e.type){var t=e.target.parentNode.parentNode;if(t&&t instanceof HTMLElement&&t.classList.contains("player-clock-timer")){var n=this.avatar(t.childNodes);if(n&&n instanceof HTMLAnchorElement&&n.pathname==="/member/"+this.username()){var r=this.current(e);if(this.counter-r>0&&this.counter-r<=1&&(this.counter=r),this.counter%5==0&&this.counter!==this.utterances[0]){var o=this.counter+" seconds left",i=new SpeechSynthesisUtterance(o);i.rate=1.8,window.speechSynthesis.speak(i),this.utterances.unshift(this.counter)}}}}},e}(),DomWatcher=function(){function e(){this.records=[],this.helper=new CountdownHelper,this.init={characterDataOldValue:!0,attributeOldValue:!0,characterData:!0,attributes:!0,childList:!0,subtree:!0},this.createDocumentBodyObserverSubscription(),this.observer.observe(document.body,this.init)}return e.prototype.createDocumentBodyObserverSubscription=function(){var e=this;this.observer=new MutationObserver(function(t){t.forEach(function(t){e.helper.reset(t),e.helper.utter(t),e.records.push(t)})})},e}(),DomModifier=function(){function e(){this.domWatcher=new DomWatcher,this.rightAlignStartButton(),this.addStartAiButton()}return e.prototype.addStartAiButton=function(){var e=this,t=document.getElementsByClassName("btns-container")[0];if(t instanceof HTMLElement){t.style.cssFloat="right";var n=t.cloneNode(!0);if(n instanceof HTMLElement){n.style.cssFloat="left",n.style.marginRight="12px";var r=n.firstChild;"A"===r.nodeName&&r instanceof HTMLElement&&(r.innerText="Start AI",r.classList.remove("new-game-btn"));var o=n.cloneNode(!0);if(o instanceof HTMLElement){o.style.display="none";var i=o.firstChild;"A"===i.nodeName&&i instanceof HTMLElement&&(i.innerText="Stop AI",i.style.color="#b4b4b3",i.style.borderBottom="#272422",i.style.backgroundColor="#272422",i.addEventListener("click",function(){e.domWatcher.helper.enabled=!1,o.style.display="none",n.style.display="block"})),r.addEventListener("click",function(){e.domWatcher.helper.enabled=!0,o.style.display="block",n.style.display="none"})}t.parentNode.appendChild(n),t.parentNode.appendChild(o)}}return this},e.prototype.rightAlignStartButton=function(){var e=document.getElementsByTagName("head")[0];if(e instanceof HTMLElement){var t=document.createTextNode(".btns-container { float: right; }"),n=document.createElement("style");n instanceof HTMLElement&&(n.type="text/css",n.appendChild(t)),e.appendChild(n)}return this},e}(),modifier=new DomModifier;