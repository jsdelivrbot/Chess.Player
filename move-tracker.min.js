var squares=Array.prototype.slice.call(document.getElementsByTagName("div")).filter(function(e){return-1!==e.className.indexOf("square-")&&-1===e.className.indexOf("blank-")}),playerMap={b:"Yellow",r:"Green",g:"Blue",w:"Red"},pieceMap={N:"Knight",B:"Bishop",Q:"Queen",K:"King",P:"Pawn",R:"Rook"},Change=function(){return function(e){if(this.square=e.target.parentNode.attributes["data-square"].value,null==e.oldValue){var t=e.target.attributes["data-piece"].value;this.player=playerMap[t.charAt(0)],this.piece=pieceMap[t.charAt(1)],this.change="added"}else this.change="removed"}}(),observer=new MutationObserver(function(e){e.filter(function(e){return"data-piece"===e.attributeName}).map(function(e){return new Change(e)}).forEach(function(e){return console.log(e)})});observer.observe(document.getElementById("board"),{attributeOldValue:!0,attributes:!0,subtree:!0});